Version 4
SHEET 1 4308 3888
WIRE 3536 1552 3536 1536
WIRE 2656 1664 2304 1664
WIRE 3440 1664 2784 1664
WIRE 3536 1664 3536 1632
WIRE 3536 1664 3520 1664
WIRE 3584 1664 3536 1664
WIRE 3904 1664 3664 1664
WIRE 2480 1776 2400 1776
WIRE 2624 1776 2544 1776
WIRE 2912 1776 2704 1776
WIRE 2400 1856 2400 1776
WIRE 2560 1856 2400 1856
WIRE 2912 1856 2912 1776
WIRE 2912 1856 2624 1856
WIRE 2784 1904 2784 1664
WIRE 2784 1904 2640 1904
WIRE 1024 1920 832 1920
WIRE 1072 1920 1024 1920
WIRE 832 1936 832 1920
WIRE 1328 1936 1168 1936
WIRE 1344 1936 1328 1936
WIRE 1168 1952 1168 1936
WIRE 1072 1968 1072 1920
WIRE 1120 1968 1072 1968
WIRE 1328 1968 1328 1936
WIRE 2112 1968 1328 1968
WIRE 2224 1968 2192 1968
WIRE 2400 1968 2400 1856
WIRE 2400 1968 2224 1968
WIRE 2448 1968 2400 1968
WIRE 2784 1968 2528 1968
WIRE 2912 1968 2912 1856
WIRE 2912 1968 2864 1968
WIRE 3904 2016 3904 1664
WIRE 3904 2016 2736 2016
WIRE 2304 2032 2304 1664
WIRE 2224 2048 2224 1968
WIRE 2272 2048 2224 2048
WIRE 2640 2064 2640 1904
WIRE 2640 2064 2336 2064
WIRE 2736 2064 2736 2016
WIRE 2912 2064 2912 1968
WIRE 2912 2064 2736 2064
WIRE 2272 2080 2224 2080
WIRE 2912 2080 2912 2064
WIRE 1312 2144 1168 2144
WIRE 1344 2144 1312 2144
WIRE 1072 2160 1072 1968
WIRE 1120 2160 1072 2160
WIRE 1312 2176 1312 2144
WIRE 2112 2176 1312 2176
WIRE 2224 2176 2224 2080
WIRE 2224 2176 2192 2176
WIRE 2448 2176 2224 2176
WIRE 2912 2176 2912 2160
WIRE 2912 2176 2528 2176
WIRE 2976 2176 2912 2176
WIRE 3120 2176 3056 2176
WIRE 3184 2176 3120 2176
WIRE 2304 2368 2304 2096
WIRE 2656 2576 2304 2576
WIRE 3472 2576 2784 2576
WIRE 3488 2576 3472 2576
WIRE 3600 2576 3568 2576
WIRE 3904 2576 3600 2576
WIRE 2480 2688 2400 2688
WIRE 2624 2688 2544 2688
WIRE 2912 2688 2704 2688
WIRE 2400 2768 2400 2688
WIRE 2560 2768 2400 2768
WIRE 2912 2768 2912 2688
WIRE 2912 2768 2624 2768
WIRE 2784 2816 2784 2576
WIRE 2784 2816 2640 2816
WIRE 1024 2832 832 2832
WIRE 1072 2832 1024 2832
WIRE 832 2848 832 2832
WIRE 1328 2848 1168 2848
WIRE 1344 2848 1328 2848
WIRE 1168 2864 1168 2848
WIRE 1072 2880 1072 2832
WIRE 1120 2880 1072 2880
WIRE 1328 2880 1328 2848
WIRE 2112 2880 1328 2880
WIRE 2224 2880 2192 2880
WIRE 2400 2880 2400 2768
WIRE 2400 2880 2224 2880
WIRE 2448 2880 2400 2880
WIRE 2784 2880 2528 2880
WIRE 2912 2880 2912 2768
WIRE 2912 2880 2864 2880
WIRE 3904 2928 3904 2576
WIRE 3904 2928 2736 2928
WIRE 2304 2944 2304 2576
WIRE 2224 2960 2224 2880
WIRE 2272 2960 2224 2960
WIRE 2640 2976 2640 2816
WIRE 2640 2976 2336 2976
WIRE 2736 2976 2736 2928
WIRE 2912 2976 2912 2880
WIRE 2912 2976 2736 2976
WIRE 2272 2992 2224 2992
WIRE 2912 2992 2912 2976
WIRE 1312 3056 1168 3056
WIRE 1344 3056 1312 3056
WIRE 1072 3072 1072 2880
WIRE 1120 3072 1072 3072
WIRE 1312 3088 1312 3056
WIRE 2112 3088 1312 3088
WIRE 2224 3088 2224 2992
WIRE 2224 3088 2192 3088
WIRE 2448 3088 2224 3088
WIRE 2912 3088 2912 3072
WIRE 2912 3088 2528 3088
WIRE 2976 3088 2912 3088
WIRE 3120 3088 3056 3088
WIRE 3184 3088 3120 3088
WIRE 2304 3280 2304 3008
FLAG 2656 2656 0
FLAG 2304 3360 0
FLAG 3184 3168 0
FLAG 832 2928 0
FLAG 1120 2928 0
FLAG 1120 3120 0
FLAG 1344 3056 Vinpos2
FLAG 1344 2848 Vinneg2
FLAG 1168 2944 0
FLAG 1168 3136 0
FLAG 1024 2832 Vindiff2
FLAG 3120 3232 0
FLAG 3472 2576 X
FLAG 3600 2576 Y
FLAG 2656 1744 0
FLAG 2304 2448 0
FLAG 3184 2256 0
FLAG 832 2016 0
FLAG 1120 2016 0
FLAG 1120 2208 0
FLAG 1168 2032 0
FLAG 1168 2224 0
FLAG 3120 2320 0
FLAG 1024 1920 Vindiff
FLAG 1344 1936 Vinneg
FLAG 1344 2144 Vinpos
FLAG 3536 1536 0
SYMBOL voltage 2656 2560 R0
SYMATTR InstName V1112
SYMATTR Value 15
SYMBOL res 2208 2864 R90
WINDOW 0 -37 56 VBottom 2
WINDOW 3 -36 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10250
SYMBOL res 2544 3072 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 2208 3072 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10250
SYMBOL res 2896 2976 R0
SYMATTR InstName R7
SYMATTR Value 250
SYMBOL res 2880 2864 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 250
SYMBOL res 2544 2864 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL voltage 2304 3264 R0
SYMATTR InstName V2213
SYMATTR Value -15
SYMBOL res 3168 3072 R0
SYMATTR InstName RL1
SYMATTR Value {RLOAD}
SYMBOL res 2960 3104 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R10
SYMATTR Value 0.001
SYMBOL cap 2624 2752 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value {CFB}
SYMBOL voltage 832 2832 R0
WINDOW 3 24 44 Left 2
SYMATTR Value 0.25
SYMATTR InstName E55
SYMBOL e 1168 2848 R0
SYMATTR InstName E3
SYMATTR Value -.5
SYMBOL e 1168 3040 R0
SYMATTR InstName E4
SYMATTR Value .5
SYMBOL cap 3104 3168 R0
SYMATTR InstName C1
SYMATTR Value {CLOAD}
SYMBOL Opamps\\opamp2 2304 2912 R0
SYMATTR InstName U1
SYMATTR Value OPAMPMOD
SYMATTR Value2 AV={AOL} RO={ROUT} RIN={RIN} CIN={CIN} FP1={FP1} FP2={FP2} FP3={FP3}
SYMBOL voltage 3584 2576 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 38 60 56 VTop 2
SYMATTR InstName V2
SYMATTR Value 1
SYMATTR SpiceModel AC
SYMBOL voltage 2656 1648 R0
SYMATTR InstName V4441
SYMATTR Value 15
SYMBOL res 2208 1952 R90
WINDOW 0 -37 56 VBottom 2
WINDOW 3 -36 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10250
SYMBOL res 2544 2160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 2208 2160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10250
SYMBOL res 2896 2064 R0
SYMATTR InstName R11
SYMATTR Value 250
SYMBOL res 2880 1952 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 250
SYMBOL res 2544 1952 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL voltage 2304 2352 R0
SYMATTR InstName V6179
SYMATTR Value -15
SYMBOL res 3168 2160 R0
SYMATTR InstName RL2
SYMATTR Value {RLOAD}
SYMBOL res 2960 2192 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R14
SYMATTR Value 0.001
SYMBOL cap 2624 1840 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value {CFB}
SYMBOL voltage 832 1920 R0
WINDOW 3 24 44 Left 2
SYMATTR Value 0.25
SYMATTR InstName E76
SYMBOL e 1168 1936 R0
SYMATTR InstName E1
SYMATTR Value -.5
SYMBOL e 1168 2128 R0
SYMATTR InstName E2
SYMATTR Value .5
SYMBOL cap 3104 2256 R0
SYMATTR InstName C3
SYMATTR Value {CLOAD}
SYMBOL Opamps\\opamp2 2304 2000 R0
SYMATTR InstName U2
SYMATTR Value OPAMPMOD
SYMATTR Value2 AV={AOL} RO={ROUT} RIN={RIN} CIN={CIN} FP1={FP1} FP2={FP2} FP3={FP3}
SYMBOL current 3536 1552 R0
WINDOW 38 39 48 Left 2
SYMATTR SpiceModel AC
SYMATTR InstName I1
SYMATTR Value 1
SYMBOL voltage 3536 1664 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName V3
SYMATTR Value 0
SYMBOL voltage 3568 1664 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
SYMATTR InstName V4
SYMATTR Value 0
SYMBOL res 3104 2160 R0
WINDOW 3 -186 102 Left 2
SYMATTR Value {CLOADRSERIES}
SYMATTR InstName R15
SYMBOL res 3104 3072 R0
WINDOW 0 -45 70 Left 2
WINDOW 3 -209 99 Left 2
SYMATTR InstName R16
SYMATTR Value {CLOADRSERIES}
SYMBOL cap 2544 2672 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value {CFB2}
SYMBOL res 2720 2672 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value {RFB}
SYMBOL cap 2544 1760 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value {CFB2}
SYMBOL res 2720 1760 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value {RFB}
TEXT -128 1856 Left 2 ;PLOT: \n \n((I(V3)/I(V4))*(-V(x)/V(y))-1)/((I(V3)/I(V4))+(-V(x)/V(y))+2)
TEXT 192 2656 Left 2 !.ac oct 10 1 100Meg
TEXT 192 2696 Left 2 !;tran 0 10e-6 0 1e-9
TEXT 192 2624 Left 2 !.OPTIONS numdgt=15
TEXT 192 2736 Left 2 !;noise V(outp)-V(outn) V2 oct 100 100 10E6
TEXT -24 2160 Left 2 ;.param CFB 0
TEXT 192 2232 Left 2 ;.step param GBW list 1Meg 5Meg 10Meg 50Meg 100Meg
TEXT 200 2192 Left 2 ;.step param CFB2 list 1f 1p 5p 10p 15p 50p
TEXT 192 2160 Left 2 !.step param CFB list 1f 5p 10p 100p 1n
TEXT -40 2200 Left 2 !.param CFB2 0p
TEXT 192 2088 Left 2 !.lib "c:\\sim\\op_amp_model.net
TEXT 200 2216 Left 2 ;.step param RFB list 100 1k 5k 10k 15k 25k 50k 100k
TEXT -40 2232 Left 2 !.param RFB 1
TEXT 88 1616 Left 6 ;Single-ended Howland VCCS\nLoop gain simulation using Middlebrook method
TEXT -384 2608 Left 2 !* OP-AMP PARAMETERS\n.param RIN 10Meg\n.param CIN 10p\n.param ROUT 10\n.param AOL 1Meg\n.param GBW 10Meg\n.param FP1 {GBW / SQRT((AOL / 1.413)**2 - 1)}\n.param FP2 {GBW}\n.param FP3 {100*GBW}
TEXT -376 2904 Left 2 !.param RLOAD 10k\n.param CLOAD 1u\n.param CLOADRSERIES 1E-3
LINE Normal 3405 2507 3655 2507
LINE Normal 3405 2665 3655 2665
LINE Normal 3655 2665 3655 2507
LINE Normal 3405 2665 3405 2507
LINE Normal 3676 1730 3676 1505
LINE Normal 3426 1730 3676 1730
LINE Normal 3426 1505 3676 1505
LINE Normal 3426 1730 3426 1505
